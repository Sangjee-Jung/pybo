{% extends 'base.html' %}
{% block content %}


<div class="container my-3">
    <h2 class="border-bottom py-2">
        <b>Financial Analysis (동종산업 Peer 비교)</b>
    </h2>
    <p></p>

    <div class="row">
        <div class="col-sm-6">
            <div class="card">
                <h5 class="card-header"><em>Target Industry - {{분류기준_name}}</em></h5>
                <div class="card-body">
                    <h5 class="card-title"><strong>{{ target }}</strong></h5>
                    <div>
                        Lv 2:
                        {{ code_2 }}
                        {{ name_2 }}
                    </div>
                    <div>
                        Lv 3:
                        {{ code_3 }}
                        {{ name_3 }}
                    </div>
                    <div>
                        Lv 4:
                        {{ code_4 }}
                        {{ name_4 }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p></p>


    <div>
        <table class="table" style = "border: 1px solid DarkGray;">
            <thead>
            <tr>
                <td><b>Lv</b></td>
                <td><b>CODE</b></td>
                <td><b>표준산업분류</b></td>
                <td><b>회사 수</b></td>
            </tr>
            </thead>

            <tbody>
            {% for list in industry_lists %}
                {% if list.0 == 2 %}
                <tr style="background-color: Silver;">
                    {% for i in list %}
                    <td>{{ i }}</td>
                    {% endfor %}
                </tr>
            {% elif list.0 == 3 %}
                <tr style="background-color: Gainsboro;">
                    {% for i in list %}
                    <td>{{ i }}</td>
                    {% endfor %}
                </tr>
            {% elif code_4 in list %}
                <tr style="background-color: LemonChiffon; font-weight: bold;">
                    {% for i in list %}
                    <td>{{ i }}</td>
                    {% endfor %}
                </tr>
            {% else %}
                <tr>
                    {% for i in list %}
                    <td>{{ i }}</td>
                    {% endfor %}
                </tr>

            {% endif %}
            {% endfor %}

            </tbody>
        </table>
    </div>

    <p></p>
    <div class="'input-group mb-3">
        <form action = "{% url 'pybo:industry_landscape_2' %}" class="row g-3">

            <div class="col-auto">
                <label class="col-form-label"> 분석대상 레벨/산업 선택 : </label>
            </div>

            <div class = "col-auto">
                <select name = "select1_level" id = "select1_level" class="form-select">
                    <option value = 2> Lv 2 </option>
                    <option value = 3> Lv 3 </option>
                    <option selected value = 4> Lv 4 </option>
                </select>
            </div>

            <div class = "col-auto">
                <select name = "select2_industry" id = "select2_industry" class="form-select">
                    {% for industry in  industries_level4 %}
                        {% if industry == name_4%}
                        <option selected> {{industry}} </option>
                        {% else %}
                        <option > {{industry}} </option>
                        {% endif %}
                    {% endfor %}

                    <!-- JavaScript에서 옵션 변경 -->

                </select>
            </div>


            <div class = "col-auto">
                <div class="form-check form-check-inline">
                <input class="form-check-input" type = "radio" name = "fs_type" id = "별도" value = "별도" checked="checked">
                <label class="form-check-label" for="별도">별도FS</label>
                </div>
            </div>

            <div class = "col-auto">
                <div class="form-check form-check-inline">
                <input class="form-check-input" type = "radio" name = "fs_type" id = "연결" value = "연결">
                <label class="form-check-label" for="별도">연결FS</label>
                </div>
            </div>

            <div class = "col-auto">
                <input type="submit" class="btn btn-primary" value="입력">
                {% csrf_token %}
            </div>
        </form>
    </div>

    <!-- Python 리스트를 JSON 문자열로 변환하여 JavaScript 변수에 할당 -->
    <script>

        let industries_level2 = {{ industries_level2_jason|safe }};
        let industries_level3 = {{ industries_level3_jason|safe }};
        let industries_level4 = {{ industries_level4_jason|safe }};

    </script>

    {% load static %}
    <script src="{% static '/script.js' %}"></script>



</div>

{% endblock %}